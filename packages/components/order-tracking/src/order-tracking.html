<div>

    <oui-back-button on-click="$ctrl.onBackButtonClick()">
        <span data-translate="order_tracking_title"
              data-translate-values="{ orderId: $ctrl.orderId }"></span>
    </oui-back-button>

    <oui-spinner data-ng-if="$ctrl.isLoading" size="l">
    </oui-spinner>

    <oui-message type="error" data-ng-if="$ctrl.error">
        <p>
            <strong data-translate="order_tracking_error"></strong>
        </p>
        <p>
            <span data-ng-bind="$ctrl.error.message"></span>
            <br />
            <small data-ng-bind="$ctrl.error.queryId"></small>
        </p>
        <oui-button variant="secondary"
                    text="{{ 'order_tracking_try_again' | translate }}"
                    on-click="$ctrl.refresh()">
        </oui-button>
    </oui-message>

    <div data-ng-if="$ctrl.order">

        <div class="oui-progress-tracker" data-ng-if="$ctrl.orderFollowUp">
            <ol class="oui-progress-tracker__steps">
                <li class="oui-progress-tracker__step"
                    data-ng-repeat="followUp in $ctrl.orderFollowUp"
                    data-ng-class="{
                    'oui-progress-tracker__step_complete': followUp.status === 'DONE',
                    'oui-progress-tracker__step_active': followUp.status === 'DOING',
                    'oui-progress-tracker__step_error': followUp.status === 'ERROR',
                    }">
                    <span class="oui-progress-tracker__status">
                        <span class="oui-progress-tracker__label"
                              data-translate="{{:: 'order_tracking_step_' + followUp.step }}">
                        </span>
                    </span>
                </li>
            </ol>
        </div>

        <div class="oui-tile mt-4">
            <h4 class="oui-heading_4 oui-tile__title" data-translate="order_tracking_details"></h4>
            <oui-spinner data-ng-if="!$ctrl.orderDetails" size="m">
            </oui-spinner>
            <ul class="list-unstyled"
                data-ng-if="$ctrl.orderDetails">
                <li data-ng-repeat="detail in $ctrl.orderDetails track by detail.orderDetailId">
                    <span data-ng-bind="detail.quantity"></span>
                    Ã—
                    <span data-ng-bind="detail.description"></span>
                </li>
            </ul>
        </div>

        <div class="oui-tile mt-4">
            <h4 class="oui-heading_4 oui-tile__title" data-translate="order_tracking_status"></h4>
            <oui-spinner data-ng-if="!$ctrl.orderHistory" size="m">
            </oui-spinner>
            <ul class="list-unstyled"
                data-ng-if="$ctrl.orderHistory">
                <li data-ng-repeat="event in $ctrl.orderHistory">
                    <span data-ng-bind=":: event.date | date:'medium'"></span>
                    -
                    <span data-ng-bind=":: 'order_tracking_history_' + event.label | translate"></span>
                </li>
            </ul>
        </div>
    </div>

</div>
