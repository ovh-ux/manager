<section data-ui-view>
    <h1>Block Storage</h1>

    <cui-message-container data-messages="$ctrl.messages"></cui-message-container>

    <oui-datagrid rows="$ctrl.storages" page-size="5">
        <oui-column
            data-title="'pci_projects_project_storages_blocks_name_label' | translate"
            data-property="name"
            data-type="string"
            data-searchable
            data-sortable="asc"
            data-filterable></oui-column>
        <oui-column
            data-title="'pci_projects_project_storages_blocks_region_label' | translate"
            data-property="region"
            data-type="string"
            data-sortable
            data-filterable></oui-column>
        <oui-column
            data-title="'pci_projects_project_storages_blocks_type_label' | translate"
            data-property="type"
            data-sortable
            data-type="string">
            <span data-ng-bind="'pci_projects_project_storages_blocks_type_' + $value | translate"></span>
        </oui-column>
        <oui-column
            data-title="'pci_projects_project_storages_blocks_size_label' | translate"
            data-property="size"
            data-type="number"
            data-sortable
            data-filterable>
            <span>{{ $value | cucBytes:2:true:'GiB'}}</span>
        </oui-column>
        <oui-column
            data-title="'pci_projects_project_storages_blocks_bootable_label' | translate"
            data-property="bootable"
            data-type="boolean"
            data-sortable
            data-filterable>
            <span data-ng-bind="'pci_projects_project_storages_blocks_bootable_' + ($value ? 'yes' : 'no') | translate"></span>
        </oui-column>
        <oui-column
            data-title="'pci_projects_project_storages_blocks_attachedTo_label' | translate"
            data-property="attachedTo"
            data-type="string"
            data-sortable
            data-filterable>
            <span data-ng-repeat="instance in $row.attachedTo track by instance.id"
                data-ng-bind="instance.name">
            </span>
        </oui-column>
        <oui-column
            data-title="'pci_projects_project_storages_blocks_status_label' | translate"
            data-property="status"
            data-sortable
            data-filterable>
            <span class="oui-status"
                data-ng-class="{
                    'oui-status_success': ($row.statusGroup === 'ACTIVE'),
                    'oui-status_warning': ($row.statusGroup === 'PENDING'),
                    'oui-status_error': ($row.statusGroup === 'ERROR'),
                    'oui-status_info': ($row.statusGroup === $row.status),
                }"
                data-ng-switch="$row.statusGroup">
                <span data-ng-bind="'pci_projects_project_storages_blocks_status_' + $row.statusGroup | translate"></span>
            </span>
        </oui-column>

        <oui-action-menu data-align="end" data-compact>
            <oui-action-menu-item data-on-click="$ctrl.editStorage($row)">
                <span data-translate="pci_projects_project_storages_blocks_edit_label"></span>
            </oui-action-menu-item>
            <oui-action-menu-item
                data-ng-if="$row.isDetachable()"
                data-on-click="$ctrl.detachStorage($row)">
                <span data-translate="pci_projects_project_storages_blocks_instance_detach_label"></span>
            </oui-action-menu-item>
            <oui-action-menu-item
                data-ng-if="$row.isAttachable()"
                data-on-click="$ctrl.attachStorage($row)">
                <span data-translate="pci_projects_project_storages_blocks_instance_attach_label"></span>
            </oui-action-menu-item>
            <oui-action-menu-item data-on-click="$ctrl.createSnapshot($row)"
                data-disabled>
                <span data-translate="pci_projects_project_storages_blocks_snapshot_create_label"></span>
            </oui-action-menu-item>
            <oui-action-menu-item data-on-click="$ctrl.deleteStorage($row)">
                <span data-translate="pci_projects_project_storages_blocks_delete_label"></span>
            </oui-action-menu-item>
        </oui-action-menu>

        <extra-top>
            <oui-button
                data-on-click="$ctrl.addStorage()"
                data-disabled>
                <i class="oui-icon oui-icon-add pr-1" aria-hidden="true"></i>
                <span data-translate="pci_projects_project_storages_blocks_add_label"></span>
            </oui-button>
        </extra-top>
    </oui-datagrid>
</section>

