<h1
    id="dedicatedCloud_datacenter_backup_header"
    data-translate="dedicatedCloud_datacenter_backup_title"
></h1>
<div data-ui-view>
    <div class="datacenter-backup">
        <div data-ovh-alert="{{ $ctrl.alertMain }}"></div>
        <oui-message
            class="mb-3"
            data-ng-if="!$ctrl.backup.isActive()"
            data-type="info"
        >
            <span
                data-translate="{{ 'dedicatedCloud_datacenter_backup_state_' + $ctrl.backup.state }}"
            ></span>
            <p
                data-translate="dedicatedCloud_datacenter_backup_not_manageable"
            ></p>
        </oui-message>
        <oui-switch
            data-model="$ctrl.backup.isActive()"
            data-on-change="$ctrl.goToDeleteBackup()"
            data-disabled="!$ctrl.backup.isActive()"
        >
        </oui-switch>
        <span
            data-translate="{{ 'dedicatedCloud_datacenter_backup_state_' + $ctrl.backup.state }}"
        ></span>
        <section class="datacenter-backup-offers">
            <h4
                class="mb-3"
                data-translate="dedicatedCloud_datacenter_backup_choose_offers"
            ></h4>
            <dedicated-cloud-datacenter-backup-offers
                data-backup-offers="$ctrl.backupOffers"
                data-backup="$ctrl.backup"
                data-preview-mode="false"
                data-user="$ctrl.currentUser"
                data-disabled="!$ctrl.backup.isActive()"
            ></dedicated-cloud-datacenter-backup-offers>
            <oui-button
                data-disabled="!$ctrl.backup.isActive() || $ctrl.actualOffer === $ctrl.backup.backupOffer"
                data-variant="primary"
                data-on-click="$ctrl.goToUpgradeOffer()"
            >
                <span
                    data-translate="dedicatedCloud_datacenter_backup_update_offer"
                ></span>
            </oui-button>
        </section>

        <section class="datacenter-backup-capabilities">
            <h4
                class="mb-3 mt-2"
                data-translate="dedicatedCloud_datacenter_backup_daily_report_title"
            ></h4>
            <p
                data-translate="dedicatedCloud_datacenter_backup_daily_report_description"
            ></p>
            <form
                name="backupCapabilitiesForm"
                id="backupCapabilitiesForm"
                class="oui-field__control_xl"
                novalidate
                data-ng-submit="backupCapabilitiesForm.$valid && $ctrl.updateBackupCapabilities()"
            >
                <fieldset
                    data-ng-disabled="$ctrl.loader.updatingCapabilities || !$ctrl.backup.isActive()"
                >
                    <oui-checkbox
                        data-model="$ctrl.backup.backupDurationInReport"
                    >
                        <span
                            data-ng-class="{ 'font-weight-bold': $ctrl.backup.backupDurationInReport }"
                            data-translate="dedicatedCloud_datacenter_backup_capability_backupDurationInReport"
                        ></span>
                    </oui-checkbox>
                    <oui-checkbox data-model="$ctrl.backup.backupSizeInReport">
                        <span
                            data-ng-class="{ 'font-weight-bold': $ctrl.backup.backupSizeInReport }"
                            data-translate="dedicatedCloud_datacenter_backup_capability_backupSizeInReport"
                        ></span>
                    </oui-checkbox>
                    <oui-checkbox data-model="$ctrl.backup.diskSizeInReport">
                        <span
                            data-ng-class="{ 'font-weight-bold': $ctrl.backup.diskSizeInReport }"
                            data-translate="dedicatedCloud_datacenter_backup_capability_diskSizeInReport"
                        ></span>
                    </oui-checkbox>
                    <oui-checkbox data-model="$ctrl.backup.fullDayInReport">
                        <span
                            data-ng-class="{ 'font-weight-bold': $ctrl.backup.fullDayInReport }"
                            data-translate="dedicatedCloud_datacenter_backup_capability_fullDayInReport"
                        ></span>
                    </oui-checkbox>
                    <oui-checkbox
                        data-model="$ctrl.backup.restorePointInReport"
                    >
                        <span
                            data-ng-class="{ 'font-weight-bold': $ctrl.backup.restorePointInReport }"
                            data-translate="dedicatedCloud_datacenter_backup_capability_restorePointInReport"
                        ></span>
                    </oui-checkbox>
                    <oui-checkbox
                        data-model="$ctrl.backup.sendReportToCustomeEmail"
                        data-ng-if=":: $ctrl.backup.isAdvanced() || $ctrl.backup.isPremium()"
                    >
                        <span
                            data-ng-class="{ 'font-weight-bold': $ctrl.backup.sendReportToCustomeEmail }"
                            data-translate="dedicatedCloud_datacenter_backup_capability_sendReportToCustomeEmail"
                        ></span>
                        <oui-field
                            data-size="xl"
                            data-ng-if="$ctrl.backup.sendReportToCustomeEmail"
                        >
                            <input
                                class="oui-input"
                                type="email"
                                data-ng-model="$ctrl.backup.mailAddress"
                                name="email"
                                maxlength="250"
                                required
                                id="email"
                            />
                        </oui-field>
                    </oui-checkbox>
                    <oui-button
                        data-variant="primary"
                        data-text="{{ ::'dedicatedCloud_datacenter_backup_capability_update' | translate }}"
                        data-disabled="!backupCapabilitiesForm.$dirty"
                        type="submit"
                        data-ng-if="!$ctrl.loader.updatingCapabilities"
                    ></oui-button>
                    <oui-spinner
                        data-size="m"
                        data-ng-if="$ctrl.loader.updatingCapabilities"
                    ></oui-spinner>
                </fieldset>
            </form>
        </section>
    </div>
</div>
