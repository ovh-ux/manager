<div class="text-center" data-ng-if="$ctrl.loadingDependencies">
    <oui-spinner data-size="l"></oui-spinner>
</div>

<div data-ng-if="!$ctrl.loadingDependencies">
    <p data-translate="hosting_database_order_private_description"></p>

    <ovh-manager-product-offers
        pricing-type="$ctrl.productOffers.pricingType"
        user=":: $ctrl.productOffers.user"
        workflow-options=":: $ctrl.productOffers.workflowOptions"
        workflow-type=":: $ctrl.productOffers.workflowType"
        on-success=":: $ctrl.handleSuccess(checkout)"
        on-error=":: $ctrl.handleError(error)"
    >
        <!-- DB Type -->
        <oui-step-form
            data-header="{{:: 'hosting_database_order_private_step_header_type' | translate }}"
            data-editable="$ctrl.isEditable && !$ctrl.checkoutLoading"
        >
            <oui-field
                data-label="{{:: 'hosting_database_order_private_type' | translate }}"
            >
                <oui-radio
                    name="orderType"
                    data-description="{{:: 'hosting_database_order_private_type_text' | translate }}"
                    data-model="$ctrl.order.type"
                    data-value="$ctrl.CATALOG_PRODUCT.name"
                    data-required
                >
                    <span
                        data-translate="hosting_database_order_private_type_label"
                    ></span>
                </oui-radio>
            </oui-field>
        </oui-step-form>

        <!-- Customization -->
        <oui-step-form
            data-header="{{:: 'hosting_database_order_private_step_header_customize' | translate }}"
            data-editable="!$ctrl.checkoutLoading"
            data-valid="$ctrl.order.datacenter"
            data-navigation="$ctrl.order.datacenter"
        >
            <!-- Product -->
            <oui-field
                data-label="{{:: 'hosting_database_order_private_ram' | translate }}"
                data-size="xl"
            >
                <oui-select
                    id="product"
                    name="product"
                    data-model="$ctrl.order.product"
                    data-items="$ctrl.products"
                    data-match="label"
                    data-placeholder="{{:: 'hosting_database_order_private_select_placeholder' | translate }}"
                    data-on-change="$ctrl.onProductChange(modelValue)"
                    data-required
                >
                </oui-select>
            </oui-field>

            <!-- Version -->
            <oui-field
                data-label="{{:: 'hosting_database_order_private_version' | translate }}"
                data-size="xl"
            >
                <oui-select
                    id="version"
                    name="version"
                    data-model="$ctrl.order.version"
                    data-items="$ctrl.versions"
                    data-match="name"
                    data-disabled="!$ctrl.versions || !$ctrl.versions.length"
                    data-placeholder="{{:: 'hosting_database_order_private_select_placeholder' | translate }}"
                    data-required
                >
                </oui-select>
            </oui-field>

            <!-- Hosting -->
            <oui-field
                data-label="{{:: 'hosting_database_order_private_hosting' | translate }}"
                data-size="xl"
            >
                <oui-select
                    id="hosting"
                    name="hosting"
                    data-model="$ctrl.serviceName"
                    data-items="$ctrl.services"
                    data-placeholder="{{:: 'hosting_database_order_private_select_placeholder' | translate }}"
                    data-on-change="$ctrl.onServiceChange(modelValue)"
                    data-required
                    data-searchable
                >
                </oui-select>
            </oui-field>
            <oui-spinner
                data-ng-if="$ctrl.loadingDatacenter"
                data-size="s"
            ></oui-spinner>
        </oui-step-form>
    </ovh-manager-product-offers>
</div>
